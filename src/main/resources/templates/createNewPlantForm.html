<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/header.html"></head>

<body>
    <div th:replace="fragments/navBar.html :: navBar('gardens')" th:with="loggedIn=${loggedIn}"></div>
    <div class="container-md my-5">

        <div class="text-center"><h1>Create New Plant</h1></div>

        <div class="row justify-content-center my-5">
            <div class="col-md-5 p-3">

                <form th:action="@{create-new-plant}" method="post" enctype="multipart/form-data" class="border rounded-3 p-3">

                    <!-- Some things are still named 'profile_picture', this is so I can reuse the existing css and js. -->
                    <div class="w-100 d-flex flex-row justify-content-center mb-3">

                        <div class="ratio ratio-1x1">
                            <img id="imageToChange" th:src="@{${plantPicture}}" alt="Plant image" class="image-fluid rounded-circle border">
                        </div>

                        <label class="position-absolute top-0 start-0 w-100 h-100 rounded-circle cursor-pointer darken-on-hover">
                            <p class="position-absolute top-50 start-50 translate-middle fs-1">+</p>
                            <input id="plantPictureInput" type="file" th:name="plantPictureInput" accept="image/*"
                                onChange="handleFileSelect(event)" class="visually-hidden">
                        </label>
                    </div>

                    <span th:if="${plantPictureError}" class="error-message" th:text="${plantPictureError}"></span>
                    <br>
                    <label for="plantName"> Plant Name: </label>
                    <br>
                    <input type="text" class="form-control" th:class="${PNErrorClass}" id="plantName"
                        placeholder="Name of plant" th:name="plantName" th:value="*{plantName}" data-cy="plantName"
                        autofocus>

                    <div th:if="${PNErrorText!=''}">
                        <h3 class="error" th:text="${PNErrorText}"></h3>
                    </div>

                    <label for="plantCount"> Plant Count: </label>
                    <br>
                    <input type="number" class="form-control" th:class="${PCErrorClass}" id="plantCount"
                        placeholder="Number of plants" th:name="plantCount" th:value="*{plantCount}" data-cy="plantCount"
                        autofocus>

                    <div th:if="${PCErrorText!=''}">
                        <h3 class="error" th:text="${PCErrorText}"></h3>
                    </div>


                    <label for="plantDescription"> Plant Description (Optional)</label>
                    <br>
                    <div class="form-description">
                        <textarea class="form-control" th:class="${PDErrorClass}" id="plantDescription"
                            placeholder="Description" th:name="plantDescription" th:text="*{plantDescription}"
                            data-cy="plantDescription" autofocus></textarea>
                    </div>
                    <div th:if="${PDErrorText!=''}">
                        <h3 class="error" th:text="${PDErrorText}" id="plantDescriptionError"></h3>
                    </div>

                    <label for="plantDate"> Plant Date (Optional)</label>
                    <input type="date" class="form-control" th:class="${PAErrorClass}" id="plantDate" placeholder=""
                        max="9999-12-30" min="0000-01-01" th:name="plantDate" th:value="*{plantDate}" data-cy="plantDate"
                        autofocus>

                    <div th:if="${PAErrorText!=''}">
                        <h3 class="error" th:text="${PAErrorText}" id="plantDateError"></h3>
                    </div>

                    <br />
                    <br>
                    <button type="submit" class="submit-button">Submit</button>
                    <a th:href="@{/my-gardens/{gardenId}(gardenId=${gardenId})}">
                        <button type="button" class="cancel-button">Cancel</button>
                    </a>
                </form>

            </div>

        </div>
    </div>
    <script th:src="@{/js/preventEnterSubmit.js}"></script>
    <script th:src="@{/js/imagePicker.js}"></script>
    <script th:src="@{/js/editPlantForm.js}"></script>
    <script th:src="@{/js/inputCharacterLimit.js}"></script>
</body>

</html>